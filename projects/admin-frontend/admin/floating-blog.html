<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Floating Blog Settings | Admin Panel</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background: #f3f4f6;
      padding: 20px;
    }

    .container {
      max-width: 900px;
      margin: 0 auto;
      background: white;
      border-radius: 12px;
      padding: 30px;
      box-shadow: 0 4px 20px rgba(0,0,0,0.1);
    }

    .header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 30px;
      padding-bottom: 20px;
      border-bottom: 2px solid #16A34A;
    }

    .header h1 {
      color: #16A34A;
      display: flex;
      align-items: center;
      gap: 12px;
    }

    .back-btn {
      background: #6b7280;
      color: white;
      padding: 10px 20px;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      text-decoration: none;
      transition: all 0.2s;
    }

    .back-btn:hover {
      background: #4b5563;
    }

    .success-message {
      background: #d1fae5;
      color: #065f46;
      padding: 15px;
      border-radius: 8px;
      margin-bottom: 20px;
      display: none;
      font-weight: 600;
      border: 2px solid #10b981;
    }

    .settings-section {
      margin-bottom: 30px;
      padding: 25px;
      background: #f9fafb;
      border-radius: 12px;
      border: 2px solid #e5e7eb;
    }

    .settings-section h2 {
      color: #374151;
      margin-bottom: 8px;
      font-size: 1.3rem;
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .settings-section p {
      color: #6b7280;
      margin-bottom: 20px;
      font-size: 0.95rem;
    }

    .form-group {
      margin-bottom: 20px;
    }

    .form-group label {
      display: block;
      margin-bottom: 8px;
      color: #374151;
      font-weight: 600;
      font-size: 0.95rem;
    }

    .form-group input[type="text"],
    .form-group input[type="url"] {
      width: 100%;
      padding: 14px 16px;
      border: 2px solid #e5e7eb;
      border-radius: 10px;
      font-size: 1rem;
      transition: all 0.3s;
      font-family: inherit;
    }

    .form-group input:focus {
      outline: none;
      border-color: #16A34A;
      box-shadow: 0 0 0 3px rgba(22, 163, 74, 0.1);
    }

    .toggle-switch {
      position: relative;
      display: inline-block;
      width: 60px;
      height: 34px;
    }

    .toggle-switch input {
      opacity: 0;
      width: 0;
      height: 0;
    }

    .slider {
      position: absolute;
      cursor: pointer;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background-color: #ccc;
      transition: .4s;
      border-radius: 34px;
    }

    .slider:before {
      position: absolute;
      content: "";
      height: 26px;
      width: 26px;
      left: 4px;
      bottom: 4px;
      background-color: white;
      transition: .4s;
      border-radius: 50%;
    }

    input:checked + .slider {
      background-color: #16A34A;
    }

    input:checked + .slider:before {
      transform: translateX(26px);
    }

    .toggle-label {
      display: flex;
      align-items: center;
      gap: 15px;
      cursor: pointer;
    }

    .icon-picker {
      display: grid;
      grid-template-columns: repeat(8, 1fr);
      gap: 10px;
      margin-top: 10px;
    }

    .icon-option {
      padding: 15px;
      border: 2px solid #e5e7eb;
      border-radius: 8px;
      text-align: center;
      cursor: pointer;
      font-size: 1.5rem;
      transition: all 0.2s;
    }

    .icon-option:hover {
      border-color: #16A34A;
      transform: scale(1.1);
    }

    .icon-option.selected {
      border-color: #16A34A;
      background: #f0fdf4;
    }

    .color-presets {
      display: grid;
      grid-template-columns: repeat(4, 1fr);
      gap: 10px;
      margin-top: 10px;
    }

    .color-preset {
      height: 50px;
      border-radius: 8px;
      cursor: pointer;
      border: 3px solid transparent;
      transition: all 0.2s;
    }

    .color-preset:hover {
      transform: scale(1.05);
      border-color: #374151;
    }

    .color-preset.selected {
      border-color: #374151;
      box-shadow: 0 0 0 2px white, 0 0 0 4px #374151;
    }

    .btn-primary {
      background: linear-gradient(135deg, #16A34A 0%, #15803d 100%);
      color: white;
      padding: 14px 32px;
      border: none;
      border-radius: 10px;
      cursor: pointer;
      font-size: 1.05rem;
      font-weight: 700;
      box-shadow: 0 4px 15px rgba(22, 163, 74, 0.3);
      transition: all 0.3s;
      width: 100%;
    }

    .btn-primary:hover {
      box-shadow: 0 6px 20px rgba(22, 163, 74, 0.4);
      transform: translateY(-2px);
    }

    .preview-section {
      background: linear-gradient(135deg, #f3f4f6 0%, #e5e7eb 100%);
      padding: 40px;
      border-radius: 12px;
      text-align: center;
      margin-top: 20px;
      position: relative;
      min-height: 200px;
    }

    .preview-label {
      color: #6b7280;
      font-size: 0.9rem;
      margin-bottom: 20px;
    }

    #previewButton {
      position: relative;
      display: inline-flex;
      flex-direction: column;
      align-items: center;
      gap: 8px;
      padding: 20px 24px;
      border-radius: 16px;
      color: white;
      text-decoration: none;
      box-shadow: 0 8px 25px rgba(0,0,0,0.2);
      transition: all 0.3s ease;
      animation: floatBounce 3s ease-in-out infinite;
      max-width: 280px;
      text-align: center;
    }

    .preview-content {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 8px;
    }

    .preview-heading {
      font-size: 0.85rem;
      font-weight: 800;
      text-transform: uppercase;
      letter-spacing: 1.5px;
      opacity: 0.95;
    }

    .preview-icon {
      font-size: 2.5rem;
      margin: 4px 0;
    }

    .preview-text {
      font-weight: 500;
      font-size: 0.9rem;
      line-height: 1.4;
      opacity: 0.95;
    }

    #previewButton:hover {
      transform: translateY(-5px) scale(1.05);
    }

    @keyframes floatBounce {
      0%, 100% { transform: translateY(0); }
      50% { transform: translateY(-10px); }
    }

    .info-box {
      background: linear-gradient(135deg, #dbeafe 0%, #bfdbfe 100%);
      padding: 20px;
      border-radius: 10px;
      border: 2px solid #3b82f6;
      margin-top: 25px;
    }

    .info-box h3 {
      color: #1e40af;
      margin-bottom: 10px;
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .info-box ul {
      color: #1e40af;
      margin-left: 20px;
      line-height: 1.8;
    }

    @media (max-width: 768px) {
      .icon-picker {
        grid-template-columns: repeat(6, 1fr);
      }

      .color-presets {
        grid-template-columns: repeat(2, 1fr);
      }
    }
  </style>
</head>
<body>
  <div class="container">
    <div class="header">
      <h1><span>üìù</span>Floating Blog Button</h1>
      <a href="index.html" class="back-btn">‚Üê Back to Admin</a>
    </div>

    <div id="successMessage" class="success-message"></div>

    <div class="settings-section">
      <h2><span>‚öôÔ∏è</span>Button Settings</h2>
      <p>Configure your floating blog button appearance and behavior.</p>

      <form id="blogSettingsForm" onsubmit="saveBlogSettings(event)">
        <div class="form-group">
          <label class="toggle-label">
            <label class="toggle-switch">
              <input type="checkbox" id="enableButton" onchange="updatePreview()">
              <span class="slider"></span>
            </label>
            <span>Enable Floating Blog Button</span>
          </label>
        </div>

        <div class="form-group">
          <label for="blogUrl">Blog URL *</label>
          <input type="url" id="blogUrl" required placeholder="https://yourblog.com or /blog.html" onchange="updatePreview()">
        </div>

        <div class="form-group">
          <label for="buttonHeading">Button Heading</label>
          <input type="text" id="buttonHeading" placeholder="Blog" maxlength="30" onchange="updatePreview()">
          <small style="color: #6b7280; font-size: 0.85rem; display: block; margin-top: 4px;">Small heading that appears above the icon</small>
        </div>

        <div class="form-group">
          <label for="buttonText">Button Description Text</label>
          <input type="text" id="buttonText" placeholder="Check out our blog for exciting stories on livestock production" maxlength="100" onchange="updatePreview()">
          <small style="color: #6b7280; font-size: 0.85rem; display: block; margin-top: 4px;">Main text that appears below the icon (max 100 chars)</small>
        </div>

        <div class="form-group">
          <label>Button Icon</label>
          <div class="icon-picker" id="iconPicker">
            <div class="icon-option selected" data-icon="üìù" onclick="selectIcon(this)">üìù</div>
            <div class="icon-option" data-icon="‚úçÔ∏è" onclick="selectIcon(this)">‚úçÔ∏è</div>
            <div class="icon-option" data-icon="üì∞" onclick="selectIcon(this)">üì∞</div>
            <div class="icon-option" data-icon="üìñ" onclick="selectIcon(this)">üìñ</div>
            <div class="icon-option" data-icon="üìö" onclick="selectIcon(this)">üìö</div>
            <div class="icon-option" data-icon="üí¨" onclick="selectIcon(this)">üí¨</div>
            <div class="icon-option" data-icon="üó®Ô∏è" onclick="selectIcon(this)">üó®Ô∏è</div>
            <div class="icon-option" data-icon="üí≠" onclick="selectIcon(this)">üí≠</div>
            <div class="icon-option" data-icon="üì¢" onclick="selectIcon(this)">üì¢</div>
            <div class="icon-option" data-icon="üì£" onclick="selectIcon(this)">üì£</div>
            <div class="icon-option" data-icon="üéØ" onclick="selectIcon(this)">üéØ</div>
            <div class="icon-option" data-icon="‚≠ê" onclick="selectIcon(this)">‚≠ê</div>
            <div class="icon-option" data-icon="üî•" onclick="selectIcon(this)">üî•</div>
            <div class="icon-option" data-icon="üí°" onclick="selectIcon(this)">üí°</div>
            <div class="icon-option" data-icon="üé®" onclick="selectIcon(this)">üé®</div>
            <div class="icon-option" data-icon="üöÄ" onclick="selectIcon(this)">üöÄ</div>
          </div>
        </div>

        <div class="form-group">
          <label>Button Color (Gradient)</label>
          <p style="color: #6b7280; font-size: 0.9rem; margin-bottom: 15px;">Choose preset or create custom gradient colors</p>
          
          <div class="color-presets">
            <div class="color-preset selected" style="background: linear-gradient(135deg, #16A34A 0%, #15803d 100%);" data-color="linear-gradient(135deg, #16A34A 0%, #15803d 100%)" onclick="selectColor(this)"></div>
            <div class="color-preset" style="background: linear-gradient(135deg, #0891b2 0%, #0e7490 100%);" data-color="linear-gradient(135deg, #0891b2 0%, #0e7490 100%)" onclick="selectColor(this)"></div>
            <div class="color-preset" style="background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%);" data-color="linear-gradient(135deg, #f59e0b 0%, #d97706 100%)" onclick="selectColor(this)"></div>
            <div class="color-preset" style="background: linear-gradient(135deg, #dc2626 0%, #b91c1c 100%);" data-color="linear-gradient(135deg, #dc2626 0%, #b91c1c 100%)" onclick="selectColor(this)"></div>
            <div class="color-preset" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);" data-color="linear-gradient(135deg, #667eea 0%, #764ba2 100%)" onclick="selectColor(this)"></div>
            <div class="color-preset" style="background: linear-gradient(135deg, #ec4899 0%, #db2777 100%);" data-color="linear-gradient(135deg, #ec4899 0%, #db2777 100%)" onclick="selectColor(this)"></div>
            <div class="color-preset" style="background: linear-gradient(135deg, #8b5cf6 0%, #7c3aed 100%);" data-color="linear-gradient(135deg, #8b5cf6 0%, #7c3aed 100%)" onclick="selectColor(this)"></div>
            <div class="color-preset" style="background: linear-gradient(135deg, #374151 0%, #1f2937 100%);" data-color="linear-gradient(135deg, #374151 0%, #1f2937 100%)" onclick="selectColor(this)"></div>
          </div>

          <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin-top: 20px;">
            <div>
              <label for="gradientStart" style="font-size: 0.9rem; margin-bottom: 5px;">Gradient Start Color</label>
              <input type="color" id="gradientStart" value="#16A34A" onchange="customGradientChanged()" style="width: 100%; height: 50px; border: 2px solid #e5e7eb; border-radius: 8px; cursor: pointer;">
            </div>
            <div>
              <label for="gradientEnd" style="font-size: 0.9rem; margin-bottom: 5px;">Gradient End Color</label>
              <input type="color" id="gradientEnd" value="#15803d" onchange="customGradientChanged()" style="width: 100%; height: 50px; border: 2px solid #e5e7eb; border-radius: 8px; cursor: pointer;">
            </div>
          </div>
        </div>

        <div class="form-group">
          <label class="toggle-label">
            <label class="toggle-switch">
              <input type="checkbox" id="openNewTab" onchange="updatePreview()">
              <span class="slider"></span>
            </label>
            <span>Open blog in new tab</span>
          </label>
        </div>

        <button type="submit" class="btn-primary">üíæ Save Blog Button Settings</button>
      </form>
    </div>

    <div class="settings-section">
      <h2><span>üîß</span>Admin Floating Button Settings</h2>
      <p>Configure floating button for admin panel quick access (appears on public pages).</p>

      <form id="adminBtnForm" onsubmit="saveAdminBtnSettings(event)">
        <div class="form-group">
          <label class="toggle-label">
            <label class="toggle-switch">
              <input type="checkbox" id="enableAdminBtn" onchange="updateAdminPreview()">
              <span class="slider"></span>
            </label>
            <span>Enable Admin Quick Access Button</span>
          </label>
        </div>

        <div class="form-group">
          <label>Admin Button Icon</label>
          <div class="icon-picker" id="adminIconPicker">
            <div class="icon-option selected" data-icon="‚öôÔ∏è" onclick="selectAdminIcon(this)">‚öôÔ∏è</div>
            <div class="icon-option" data-icon="üîß" onclick="selectAdminIcon(this)">üîß</div>
            <div class="icon-option" data-icon="üéõÔ∏è" onclick="selectAdminIcon(this)">üéõÔ∏è</div>
            <div class="icon-option" data-icon="üë§" onclick="selectAdminIcon(this)">üë§</div>
            <div class="icon-option" data-icon="üîë" onclick="selectAdminIcon(this)">üîë</div>
            <div class="icon-option" data-icon="üìä" onclick="selectAdminIcon(this)">üìä</div>
            <div class="icon-option" data-icon="üíº" onclick="selectAdminIcon(this)">üíº</div>
            <div class="icon-option" data-icon="üéØ" onclick="selectAdminIcon(this)">üéØ</div>
          </div>
        </div>

        <div class="form-group">
          <label>Admin Button Position</label>
          <select id="adminBtnPosition" onchange="updateAdminPreview()" style="width: 100%; padding: 14px; border: 2px solid #e5e7eb; border-radius: 10px; font-size: 1rem;">
            <option value="bottom-left">Bottom Left</option>
            <option value="bottom-right">Bottom Right</option>
            <option value="top-left">Top Left</option>
            <option value="top-right">Top Right</option>
          </select>
        </div>

        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px;">
          <div>
            <label for="adminGradientStart" style="font-size: 0.9rem; margin-bottom: 5px;">Gradient Start</label>
            <input type="color" id="adminGradientStart" value="#dc2626" onchange="updateAdminPreview()" style="width: 100%; height: 50px; border: 2px solid #e5e7eb; border-radius: 8px; cursor: pointer;">
          </div>
          <div>
            <label for="adminGradientEnd" style="font-size: 0.9rem; margin-bottom: 5px;">Gradient End</label>
            <input type="color" id="adminGradientEnd" value="#b91c1c" onchange="updateAdminPreview()" style="width: 100%; height: 50px; border: 2px solid #e5e7eb; border-radius: 8px; cursor: pointer;">
          </div>
        </div>

        <button type="submit" class="btn-primary" style="margin-top: 20px;">üíæ Save Admin Button Settings</button>
      </form>
    </div>

    <div class="preview-section">
      <div class="preview-label">üîç Live Preview</div>
      <a href="#" id="previewButton" style="background: linear-gradient(135deg, #16A34A 0%, #15803d 100%);">
        <div class="preview-content">
          <div class="preview-heading" id="previewHeading">Blog</div>
          <div class="preview-icon" id="previewIcon">üìù</div>
          <div class="preview-text" id="previewText">Check out our blog for exciting stories on livestock production</div>
        </div>
      </a>
      
      <a href="#" id="adminPreviewButton" style="display: none; position: absolute; bottom: 30px; left: 30px; background: linear-gradient(135deg, #dc2626 0%, #b91c1c 100%); width: 60px; height: 60px; border-radius: 50%; display: flex; align-items: center; justify-content: center; text-decoration: none; font-size: 1.8rem; box-shadow: 0 4px 15px rgba(220, 38, 38, 0.4); transition: all 0.3s;">
        <span id="adminPreviewIcon">‚öôÔ∏è</span>
      </a>
    </div>

    <div class="info-box">
      <h3><span>üí°</span>How It Works</h3>
      <ul>
        <li><strong>Blog Button:</strong> Appears on all public pages when enabled with custom heading, icon, description, and gradient colors</li>
        <li><strong>Admin Button:</strong> Quick access button for administrators to reach the admin panel from any public page</li>
        <li><strong>Custom Gradients:</strong> Choose from presets or create your own gradient using the color pickers</li>
        <li><strong>Live Preview:</strong> See changes in real-time before saving</li>
        <li><strong>Mobile Responsive:</strong> Both buttons adapt perfectly to mobile screens</li>
        <li><strong>Instant Updates:</strong> Changes take effect immediately across all pages</li>
      </ul>
    </div>
  </div>

  <script>
    let selectedIcon = 'üìù';
    let selectedColor = 'linear-gradient(135deg, #16A34A 0%, #15803d 100%)';
    let gradientStart = '#16A34A';
    let gradientEnd = '#15803d';
    let selectedAdminIcon = '‚öôÔ∏è';

    // Load settings from API
    async function loadSettings() {
      try {
        const response = await fetch('/api/main?action=blog');
        const data = await response.json();
        const blogSettings = data.blogSettings || {};
        const adminSettings = data.adminSettings || {};

        document.getElementById('enableButton').checked = blogSettings.enabled || false;
        document.getElementById('blogUrl').value = blogSettings.url || '';
        document.getElementById('buttonHeading').value = blogSettings.heading || 'Blog';
        document.getElementById('buttonText').value = blogSettings.text || 'Check out our blog for exciting stories on livestock production';
        document.getElementById('openNewTab').checked = blogSettings.newTab || false;

        if (blogSettings.icon) {
          selectedIcon = blogSettings.icon;
          document.querySelectorAll('#iconPicker .icon-option').forEach(icon => {
            if (icon.dataset.icon === selectedIcon) {
              icon.classList.add('selected');
            } else {
              icon.classList.remove('selected');
            }
          });
        }

        if (blogSettings.gradientStart && blogSettings.gradientEnd) {
          gradientStart = blogSettings.gradientStart;
          gradientEnd = blogSettings.gradientEnd;
          document.getElementById('gradientStart').value = gradientStart;
          document.getElementById('gradientEnd').value = gradientEnd;
          selectedColor = `linear-gradient(135deg, ${gradientStart} 0%, ${gradientEnd} 100%)`;
        }

        document.getElementById('enableAdminBtn').checked = adminSettings.enabled || false;
        document.getElementById('adminBtnPosition').value = adminSettings.position || 'bottom-left';
        document.getElementById('adminGradientStart').value = adminSettings.gradientStart || '#dc2626';
        document.getElementById('adminGradientEnd').value = adminSettings.gradientEnd || '#b91c1c';

        if (adminSettings.icon) {
          selectedAdminIcon = adminSettings.icon;
          document.querySelectorAll('#adminIconPicker .icon-option').forEach(icon => {
            if (icon.dataset.icon === selectedAdminIcon) {
              icon.classList.add('selected');
            } else {
              icon.classList.remove('selected');
            }
          });
        }

        updatePreview();
        updateAdminPreview();
      } catch (error) {
        showAlert('Error loading blog settings', 'error');
      }
    }

    function selectIcon(element) {
      document.querySelectorAll('#iconPicker .icon-option').forEach(icon => {
        icon.classList.remove('selected');
      });
      element.classList.add('selected');
      selectedIcon = element.dataset.icon;
      updatePreview();
    }

    function selectAdminIcon(element) {
      document.querySelectorAll('#adminIconPicker .icon-option').forEach(icon => {
        icon.classList.remove('selected');
      });
      element.classList.add('selected');
      selectedAdminIcon = element.dataset.icon;
      updateAdminPreview();
    }

    function selectColor(element) {
      document.querySelectorAll('.color-preset').forEach(color => {
        color.classList.remove('selected');
      });
      element.classList.add('selected');
      selectedColor = element.dataset.color;
      
      // Extract colors from gradient
      const gradientMatch = selectedColor.match(/#[0-9A-Fa-f]{6}/g);
      if (gradientMatch && gradientMatch.length >= 2) {
        gradientStart = gradientMatch[0];
        gradientEnd = gradientMatch[1];
        document.getElementById('gradientStart').value = gradientStart;
        document.getElementById('gradientEnd').value = gradientEnd;
      }
      
      updatePreview();
    }

    function customGradientChanged() {
      gradientStart = document.getElementById('gradientStart').value;
      gradientEnd = document.getElementById('gradientEnd').value;
      selectedColor = `linear-gradient(135deg, ${gradientStart} 0%, ${gradientEnd} 100%)`;
      
      // Deselect all preset colors
      document.querySelectorAll('.color-preset').forEach(color => {
        color.classList.remove('selected');
      });
      
      updatePreview();
    }

    function updatePreview() {
      const previewButton = document.getElementById('previewButton');
      const previewHeading = document.getElementById('previewHeading');
      const previewIcon = document.getElementById('previewIcon');
      const previewText = document.getElementById('previewText');
      
      const heading = document.getElementById('buttonHeading').value || 'Blog';
      const text = document.getElementById('buttonText').value || 'Check out our blog for exciting stories on livestock production';
      
      previewHeading.textContent = heading;
      previewIcon.textContent = selectedIcon;
      previewText.textContent = text;
      previewButton.style.background = selectedColor;
      
      if (document.getElementById('enableButton').checked) {
        previewButton.style.opacity = '1';
      } else {
        previewButton.style.opacity = '0.5';
      }
    }

    function updateAdminPreview() {
      const adminBtn = document.getElementById('adminPreviewButton');
      const adminIcon = document.getElementById('adminPreviewIcon');
      const enabled = document.getElementById('enableAdminBtn').checked;
      const position = document.getElementById('adminBtnPosition').value;
      const startColor = document.getElementById('adminGradientStart').value;
      const endColor = document.getElementById('adminGradientEnd').value;
      
      adminIcon.textContent = selectedAdminIcon;
      adminBtn.style.background = `linear-gradient(135deg, ${startColor} 0%, ${endColor} 100%)`;
      adminBtn.style.display = enabled ? 'flex' : 'none';
      
      // Reset positions
      adminBtn.style.top = 'auto';
      adminBtn.style.bottom = 'auto';
      adminBtn.style.left = 'auto';
      adminBtn.style.right = 'auto';
      
      // Set position
      if (position === 'bottom-left') {
        adminBtn.style.bottom = '30px';
        adminBtn.style.left = '30px';
      } else if (position === 'bottom-right') {
        adminBtn.style.bottom = '30px';
        adminBtn.style.right = '30px';
      } else if (position === 'top-left') {
        adminBtn.style.top = '30px';
        adminBtn.style.left = '30px';
      } else if (position === 'top-right') {
        adminBtn.style.top = '30px';
        adminBtn.style.right = '30px';
      }
    }

    async function saveBlogSettings(event) {
      event.preventDefault();
      const blogSettings = {
        enabled: document.getElementById('enableButton').checked,
        url: document.getElementById('blogUrl').value,
        heading: document.getElementById('buttonHeading').value || 'Blog',
        text: document.getElementById('buttonText').value || 'Check out our blog for exciting stories on livestock production',
        icon: selectedIcon,
        gradientStart: gradientStart,
        gradientEnd: gradientEnd,
        bgColor: selectedColor,
        newTab: document.getElementById('openNewTab').checked,
        updatedAt: new Date().toISOString()
      };
      try {
        const response = await fetch('/api/main?action=blog', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({ blogSettings })
        });
        if (!response.ok) throw new Error('Save failed');
        const successDiv = document.getElementById('successMessage');
        successDiv.textContent = '‚úÖ Blog button settings saved successfully! Changes are now live on your website.';
        successDiv.style.display = 'block';
        window.scrollTo({ top: 0, behavior: 'smooth' });
        setTimeout(() => { successDiv.style.display = 'none'; }, 5000);
      } catch (error) {
        showAlert('Error saving blog settings', 'error');
      }
    }

    async function saveAdminBtnSettings(event) {
      event.preventDefault();
      const adminSettings = {
        enabled: document.getElementById('enableAdminBtn').checked,
        icon: selectedAdminIcon,
        position: document.getElementById('adminBtnPosition').value,
        gradientStart: document.getElementById('adminGradientStart').value,
        gradientEnd: document.getElementById('adminGradientEnd').value,
        updatedAt: new Date().toISOString()
      };
      try {
        const response = await fetch('/api/main?action=blog', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({ adminSettings })
        });
        if (!response.ok) throw new Error('Save failed');
        const successDiv = document.getElementById('successMessage');
        successDiv.textContent = '‚úÖ Admin button settings saved successfully! Changes are now live.';
        successDiv.style.display = 'block';
        window.scrollTo({ top: 0, behavior: 'smooth' });
        setTimeout(() => { successDiv.style.display = 'none'; }, 5000);
      } catch (error) {
        showAlert('Error saving admin button settings', 'error');
      }
    }
    function showAlert(message, type) {
      let container = document.getElementById('alertContainer');
      if (!container) {
        container = document.createElement('div');
        container.id = 'alertContainer';
        document.querySelector('.container').prepend(container);
      }
      const alert = document.createElement('div');
      alert.className = `alert alert-${type}`;
      alert.textContent = message;
      container.appendChild(alert);
      setTimeout(() => alert.remove(), 3000);
    }

    // Initialize
    loadSettings();
  </script>
</body>
</html>
