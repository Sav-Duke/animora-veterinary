<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Quick Stats | Admin Panel</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background: #f3f4f6;
      padding: 20px;
    }

    .container {
      max-width: 1400px;
      margin: 0 auto;
    }

    .header {
      background: white;
      border-radius: 12px;
      padding: 30px;
      margin-bottom: 20px;
      box-shadow: 0 4px 20px rgba(0,0,0,0.1);
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .header h1 {
      color: #16A34A;
      display: flex;
      align-items: center;
      gap: 12px;
    }

    .back-btn {
      background: #6b7280;
      color: white;
      padding: 10px 20px;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      text-decoration: none;
      transition: all 0.2s;
    }

    .back-btn:hover {
      background: #4b5563;
    }

    .stats-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
      gap: 20px;
      margin-bottom: 20px;
    }

    .stat-card {
      background: white;
      padding: 25px;
      border-radius: 12px;
      box-shadow: 0 4px 20px rgba(0,0,0,0.1);
      position: relative;
      overflow: hidden;
    }

    .stat-card::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      width: 4px;
      height: 100%;
      background: linear-gradient(135deg, #16A34A 0%, #15803d 100%);
    }

    .stat-card.blue::before {
      background: linear-gradient(135deg, #0891b2 0%, #0e7490 100%);
    }

    .stat-card.orange::before {
      background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%);
    }

    .stat-card.purple::before {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    }

    .stat-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 15px;
    }

    .stat-icon {
      font-size: 2rem;
      opacity: 0.8;
    }

    .stat-value {
      font-size: 2.5rem;
      font-weight: 700;
      color: #374151;
      margin-bottom: 5px;
    }

    .stat-label {
      color: #6b7280;
      font-size: 0.95rem;
    }

    .stat-change {
      font-size: 0.85rem;
      margin-top: 10px;
      padding-top: 10px;
      border-top: 1px solid #e5e7eb;
    }

    .stat-change.positive {
      color: #10b981;
    }

    .stat-change.negative {
      color: #ef4444;
    }

    .chart-section {
      background: white;
      border-radius: 12px;
      padding: 30px;
      box-shadow: 0 4px 20px rgba(0,0,0,0.1);
      margin-bottom: 20px;
    }

    .chart-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 25px;
    }

    .chart-header h2 {
      color: #374151;
    }

    .time-filter {
      display: flex;
      gap: 10px;
    }

    .time-filter button {
      padding: 8px 16px;
      border: 2px solid #e5e7eb;
      background: white;
      border-radius: 8px;
      cursor: pointer;
      transition: all 0.2s;
      font-weight: 600;
      color: #6b7280;
    }

    .time-filter button.active {
      background: #16A34A;
      color: white;
      border-color: #16A34A;
    }

    .time-filter button:hover {
      border-color: #16A34A;
    }

    .chart-placeholder {
      height: 300px;
      background: linear-gradient(135deg, #f3f4f6 0%, #e5e7eb 100%);
      border-radius: 8px;
      display: flex;
      align-items: center;
      justify-content: center;
      color: #6b7280;
      font-size: 1.1rem;
    }

    .activity-feed {
      background: white;
      border-radius: 12px;
      padding: 30px;
      box-shadow: 0 4px 20px rgba(0,0,0,0.1);
    }

    .activity-feed h2 {
      color: #374151;
      margin-bottom: 20px;
    }

    .activity-item {
      display: flex;
      gap: 15px;
      padding: 15px;
      border-bottom: 1px solid #e5e7eb;
      transition: background 0.2s;
    }

    .activity-item:hover {
      background: #f9fafb;
    }

    .activity-item:last-child {
      border-bottom: none;
    }

    .activity-icon {
      width: 40px;
      height: 40px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 1.2rem;
      flex-shrink: 0;
    }

    .activity-icon.appointment {
      background: #d1fae5;
    }

    .activity-icon.staff {
      background: #dbeafe;
    }

    .activity-icon.service {
      background: #fef3c7;
    }

    .activity-icon.contact {
      background: #e9d5ff;
    }

    .activity-content {
      flex: 1;
    }

    .activity-title {
      font-weight: 600;
      color: #374151;
      margin-bottom: 3px;
    }

    .activity-time {
      font-size: 0.85rem;
      color: #9ca3af;
    }

    .quick-actions {
      background: white;
      border-radius: 12px;
      padding: 30px;
      box-shadow: 0 4px 20px rgba(0,0,0,0.1);
      margin-top: 20px;
    }

    .quick-actions h2 {
      color: #374151;
      margin-bottom: 20px;
    }

    .action-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 15px;
    }

    .action-btn {
      padding: 20px;
      border: 2px solid #e5e7eb;
      background: white;
      border-radius: 8px;
      cursor: pointer;
      transition: all 0.2s;
      text-align: center;
      text-decoration: none;
      color: #374151;
      font-weight: 600;
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 10px;
    }

    .action-btn:hover {
      border-color: #16A34A;
      transform: translateY(-2px);
      box-shadow: 0 4px 12px rgba(22, 163, 74, 0.15);
    }

    .action-btn .icon {
      font-size: 2rem;
    }

    @media (max-width: 768px) {
      .header {
        flex-direction: column;
        gap: 15px;
        text-align: center;
      }

      .time-filter {
        flex-wrap: wrap;
      }
    }
  </style>
</head>
<body>
  <div class="container">
    <div class="header">
      <h1><span>üìä</span>Quick Stats Dashboard</h1>
      <a href="index.html" class="back-btn">‚Üê Back to Admin</a>
    </div>

    <div class="stats-grid">
      <div class="stat-card">
        <div class="stat-header">
          <div class="stat-icon">üìÖ</div>
        </div>
        <div class="stat-value" id="appointmentsToday">0</div>
        <div class="stat-label">Appointments Today</div>
        <div class="stat-change positive">‚Üë <span id="appointmentsTrend">+12%</span> from last week</div>
      </div>

      <div class="stat-card blue">
        <div class="stat-header">
          <div class="stat-icon">üë•</div>
        </div>
        <div class="stat-value" id="totalStaff">0</div>
        <div class="stat-label">Team Members</div>
        <div class="stat-change positive">Active and available</div>
      </div>

      <div class="stat-card orange">
        <div class="stat-header">
          <div class="stat-icon">üè•</div>
        </div>
        <div class="stat-value" id="totalServices">0</div>
        <div class="stat-label">Services Offered</div>
        <div class="stat-change">Across 4 categories</div>
      </div>

      <div class="stat-card purple">
        <div class="stat-header">
          <div class="stat-icon">ü¶†</div>
        </div>
        <div class="stat-value" id="totalDiseases">0</div>
        <div class="stat-label">Diseases in Database</div>
        <div class="stat-change">Knowledge base size</div>
      </div>

      <div class="stat-card">
        <div class="stat-header">
          <div class="stat-icon">‚≠ê</div>
        </div>
        <div class="stat-value">4.9</div>
        <div class="stat-label">Average Rating</div>
        <div class="stat-change positive">‚Üë Based on reviews</div>
      </div>

      <div class="stat-card blue">
        <div class="stat-header">
          <div class="stat-icon">üìû</div>
        </div>
        <div class="stat-value" id="pendingContacts">0</div>
        <div class="stat-label">Pending Inquiries</div>
        <div class="stat-change">Needs response</div>
      </div>

      <div class="stat-card orange">
        <div class="stat-header">
          <div class="stat-icon">üì∏</div>
        </div>
        <div class="stat-value">89</div>
        <div class="stat-label">Photos in Gallery</div>
        <div class="stat-change">Media library size</div>
      </div>

      <div class="stat-card purple">
        <div class="stat-header">
          <div class="stat-icon">ü§ñ</div>
        </div>
        <div class="stat-value">247</div>
        <div class="stat-label">AI Conversations</div>
        <div class="stat-change positive">‚Üë +23% this month</div>
      </div>
    </div>

    <div class="chart-section">
      <div class="chart-header">
        <h2>Appointments Overview</h2>
        <div class="time-filter">
          <button class="active" onclick="setTimeFilter('week')">Week</button>
          <button onclick="setTimeFilter('month')">Month</button>
          <button onclick="setTimeFilter('year')">Year</button>
        </div>
      </div>
      <div class="chart-placeholder">
        üìà Chart visualization would appear here<br>
        <small style="opacity: 0.7;">(Integrate Chart.js or similar library for visual graphs)</small>
      </div>
    </div>

    <div class="activity-feed">
      <h2>Recent Activity</h2>
      <div id="activityList">
        <div class="activity-item">
          <div class="activity-icon appointment">üìÖ</div>
          <div class="activity-content">
            <div class="activity-title">New appointment booked</div>
            <div class="activity-time">John Doe scheduled for tomorrow at 10:00 AM</div>
          </div>
        </div>

        <div class="activity-item">
          <div class="activity-icon staff">üë•</div>
          <div class="activity-content">
            <div class="activity-title">Staff member updated</div>
            <div class="activity-time">Dr. Jay's profile was modified 2 hours ago</div>
          </div>
        </div>

        <div class="activity-item">
          <div class="activity-icon service">üè•</div>
          <div class="activity-content">
            <div class="activity-title">Service added</div>
            <div class="activity-time">New service "Emergency Care" added yesterday</div>
          </div>
        </div>

        <div class="activity-item">
          <div class="activity-icon contact">üìû</div>
          <div class="activity-content">
            <div class="activity-title">Contact form submission</div>
            <div class="activity-time">Sarah Smith inquired about pet grooming 3 hours ago</div>
          </div>
        </div>

        <div class="activity-item">
          <div class="activity-icon appointment">üìÖ</div>
          <div class="activity-content">
            <div class="activity-title">Appointment confirmed</div>
            <div class="activity-time">Mike Johnson's appointment confirmed yesterday</div>
          </div>
        </div>
      </div>
    </div>

    <div class="quick-actions">
      <h2>Quick Actions</h2>
      <div class="action-grid">
        <a href="appointments.html" class="action-btn">
          <span class="icon">üìÖ</span>
          <span>View Appointments</span>
        </a>
        <a href="staff-manager.html" class="action-btn">
          <span class="icon">üë•</span>
          <span>Manage Staff</span>
        </a>
        <a href="services-manager.html" class="action-btn">
          <span class="icon">üè•</span>
          <span>Edit Services</span>
        </a>
        <a href="diseases.html" class="action-btn">
          <span class="icon">ü¶†</span>
          <span>Disease Database</span>
        </a>
        <a href="testimonials.html" class="action-btn">
          <span class="icon">‚≠ê</span>
          <span>Reviews</span>
        </a>
        <a href="settings.html" class="action-btn">
          <span class="icon">‚öôÔ∏è</span>
          <span>Settings</span>
        </a>
      </div>
    </div>
  </div>

  <script>
    // Load stats from backend APIs
    async function loadStats() {
      try {
        // Appointments
        const appointmentsRes = await fetch('/api/appointments');
        const appointments = await appointmentsRes.json();
        const today = new Date().toISOString().split('T')[0];
        const todayAppointments = Array.isArray(appointments) ? appointments.filter(a => a.date === today) : [];
        document.getElementById('appointmentsToday').textContent = todayAppointments.length;

        // Staff
        const staffResponse = await fetch('/api/resources?type=staff');
        const staff = await staffResponse.json();
        document.getElementById('totalStaff').textContent = Array.isArray(staff) ? staff.length : 0;

        // Services
        const servicesResponse = await fetch('/api/resources?type=services');
        const services = await servicesResponse.json();
        let totalServices = 0;
        if (Array.isArray(services)) {
          totalServices = services.length;
        } else {
          Object.values(services).forEach(category => {
            if (Array.isArray(category)) totalServices += category.length;
          });
        }
        document.getElementById('totalServices').textContent = totalServices;

        // Diseases
        try {
          const diseasesResponse = await fetch('/api/resources?type=diseases');
          const diseases = await diseasesResponse.json();
          document.getElementById('totalDiseases').textContent = Array.isArray(diseases) ? diseases.length : 0;
        } catch (e) {
          document.getElementById('totalDiseases').textContent = '20+';
        }

        // Pending Contacts
        try {
          const contactsResponse = await fetch('/api/resources?type=contact-info');
          const contacts = await contactsResponse.json();
          // If contacts have a 'status' field, count those pending
          let pending = 0;
          if (Array.isArray(contacts)) {
            pending = contacts.filter(c => c.status === 'pending').length;
          } else if (contacts && contacts.inquiries) {
            pending = contacts.inquiries.filter(c => c.status === 'pending').length;
          }
          document.getElementById('pendingContacts').textContent = pending;
        } catch (e) {
          document.getElementById('pendingContacts').textContent = '0';
        }

      } catch (error) {
        console.error('Error loading stats:', error);
      }
    }

    function setTimeFilter(period) {
      // Remove active class from all buttons
      document.querySelectorAll('.time-filter button').forEach(btn => {
        btn.classList.remove('active');
      });

      // Add active class to clicked button
      event.target.classList.add('active');

      // In a real implementation, this would reload chart data
      console.log('Time filter set to:', period);
    }

    // Load stats on page load
    loadStats();

    // Refresh stats every 30 seconds
    setInterval(loadStats, 30000);
  </script>
</body>
</html>
